@page "/goaldetails"
@layout MainLayout

@using GoalGrower.Models

<PageTitle>Goal Grower - Goal Details Page</PageTitle>

<h1>@goal.GoalName Details</h1>

<div class="details-container">
    <p>Description: @goal.GoalDescription</p>
    <p>Goal Amount: $@goal.GoalAmount</p>
    <p>Complete By Date: @goal.CompletionDate</p>

    <div class="icon-container">
        <a class="edit-goal-icon" href="editgoal">
            <img src="/images/edit-icon.png" alt="edit icon" class="icon" />
        </a>
        <a class="delete-goal-icon" href="/deletegoal">
            <img src="/images/delete-icon.png" alt="delete icon" class="icon" />
        </a>
    </div>
</div>

<h2>Transactions</h2>
<button type="submit" @onclick="AddTransaction">Add Transaction</button>

<div class="transactions-container">
    @if (transactions != null && transactions.Any())
    {
        <ul>
            @foreach (var transaction in transactions)
            {
                <li>@transaction.TransactionDate | @transaction.TransactionType | @transaction.TransactionAmount
                    <a class="edit-transaction-icon" href="edittransaction">
                        <img src="/images/edit-icon.png" alt="edit icon" class="icon" />
                    </a>
                    <a class="delete-transaction-icon" href="/deletetransaction">
                        <img src="/images/delete-icon.png" alt="delete icon" class="icon" />
                    </a>
                </li>
            }
        </ul>
    }
    else
    {
        <p>Nothing here yet!</p>
    }
</div>

@if (!string.IsNullOrEmpty(errorMessage))
{
    <p style="color:red">@errorMessage</p>
}

@code {
    [Parameter]
    public int GoalId { get; set; }

    private GoalModel goal = new GoalModel();
    private List<TransactionModel> transactions = new List<TransactionModel>();
    private string errorMessage = string.Empty;

    protected override async Task OnInitializedAsync()
    {

        // Logic to load goal details here
    }

    private void AddTransaction()
    {
        // Navigate, open modal, etc.
    }
}
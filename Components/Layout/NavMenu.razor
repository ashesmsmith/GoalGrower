@using Microsoft.AspNetCore.Components.Authorization
@inject AuthenticationStateProvider AuthStateProvider
@inject NavigationManager Navigation

<nav>
    @if (isAuthenticated)
    {
        <NavLink href="/dashboard">Dashboard</NavLink>
        <NavLink href="/logout" class="nav-link">Logout</NavLink>
        <NavLink href="/dashboard">
            <img src="images\logo.png" alt="Goal Grower Logo" width="500" height="500" />
        </NavLink>
    }
    else
    {
        <NavLink href="/">Login</NavLink>
        <NavLink href="/add-user">Register</NavLink>
    }
</nav>

@code {
    private bool isAuthenticated = false;

    protected override async Task OnParametersSetAsync()
    {
        
       var authState = await AuthStateProvider.GetAuthenticationStateAsync();
        isAuthenticated = authState.User.Identity?.IsAuthenticated ?? false;
    }
}
